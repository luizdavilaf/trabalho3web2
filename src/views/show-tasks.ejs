<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
   

    <title>Categorias</title>
  </head>
  <body>
    <div class="box">
        <header class="jumbotron"></header>
      <div class="container">
        <%- include('./includes/navbar'/* , { user: user || undefined} */) %>
        <main>
          <div class="mainContainer">
            <h2>Tarefas:</h2>
            <table class='table table-striped table-secondary'>
              <tr>
                <th>Código</th>
                <th>Nome</th>
                <th>Prazo</th>
                <th>Concluída</th>
              </tr>
              <% if(tasks.length){ for(let i = 0; i <tasks.length; i++) { %>
                <tr>
                  <td><%=tasks[i].id%></td>
                  <td><%=tasks[i].title%></td>
                  <td><%=tasks[i].deadline%></td>
                  <td><% if(tasks[i].done==true){tasks[i].done="Sim"}else{tasks[i].done="Não"} %>
                  <%=tasks[i].done%></td>
                  <td><a href='./tasks/set-done/<%=tasks[i].id%>' class='btn btn-success'>Concluir</a></td>                  
                  <td><a href='./excluir.php?cod=$codigo' class='btn btn-danger'>Excluir</a></td>
                </tr>
                    
                                
                    <% } } %>
            </table>
              <nav aria-label="Page navigation example">
                <ul class="pagination">
                  <% if (page==1) { %>
                        <li class="page-item"><a href="#" class="page-link" disabled class="previous1">&laquo; Anterior</a>  </li>     
                        <% } else {%>
                        <li class="page-item"><a class="page-link" href="/tasks/list-by-category/?limit=5&page=<%=previous%>&categoryId=<%=categoryId%>&pending=<%=pending%>&outdated=<%=outdated%>" class="previous1">&laquo; Anterior</a></li>
                        <%page } %>
                        <% if (page==totalPages) { %> 
                        <li class="page-item"><a class="page-link" href="<%totalPages%>" disabled class="next1">Próximo &raquo;</a> </li>                  
                        <% } else { %><li class="page-item"><a class="page-link" href="/tasks/list-by-category/?limit=5&page=<%=next%>&categoryId=<%=categoryId%>&pending=<%=pending%>&outdated=<%=outdated%>" class="next1">Próximo &raquo;</a></li><% } %>
                </ul>
              </nav>
            </div>
          </div>
        </main>
      </div>
    </div>
  </body>
</html>
